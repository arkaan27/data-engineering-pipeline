name: data_processing
conda_env: conda.yml

entry_points:
  main:
    parameters:

      AWS_ACCESS_KEY_ID:
        description: Your AWS Access Key ID
        type: string

      AWS_SECRET_ACCESS_KEY:
        description: Your AWS Secret Access Key
        type: string

      AWS_SESSION_TOKEN:
        description: Your AWS Session Token
        type: string
        default: x

      AWS_DEFAULT_REGION:
        description: YOUR AWS Default region where the bucket is present
        type: string

      input_artifact:
        description: Fully qualified name for the artifact
        type: string
        default: raw_data:latest

      output_directory:
        description: Fully qualified name of the directory to store processed results
        type: string
        default: Processed_data

      output_artifact:
        description: Name for the W&B artifact that will be created
        type: string
        default: processed_data

      output_type:
        description: Type of the artifact to create
        type: string
        default: processed_data

      output_description:
        description: Description of the Artifact for reference
        type: string


    command: >-
        python run.py  --AWS_ACCESS_KEY_ID {AWS_ACCESS_KEY_ID} \
                       --AWS_SECRET_ACCESS_KEY {AWS_SECRET_ACCESS_KEY} \
                       --AWS_SESSION_TOKEN {AWS_SESSION_TOKEN} \
                       --AWS_DEFAULT_REGION {AWS_DEFAULT_REGION} \
                       --input_artifact {input_artifact}  \
                       --output_directory {output_directory} \
                       --output_artifact {output_artifact}  \
                       --output_type {output_type}  \
                       --output_description {output_description}